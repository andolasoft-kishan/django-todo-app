{% extends "base.html" %}

{% block title %}Todo List{% endblock %}

{% block content %}
  <div class="hero p-4 mb-4" style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1);">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h3 class="mb-0 text-white fw-bold">My Todos</h3>
        <p class="text-white-50 small mb-0">Manage your daily tasks efficiently</p>
      </div>
      <a class="btn btn-success px-4 fw-bold" href="{% url 'add' %}">
        <i class="bi bi-plus-circle"></i> New Todo
      </a>
    </div>
  </div>

  <div class="row g-4">
    {% for t in todo %}
      <div class="col-12 col-md-6 col-lg-4">
        <div class="card p-3 h-100 shadow-sm {% if t.complete %}opacity-75 border-success{% endif %}" 
             style="background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); transition: transform 0.2s;">
          
          <div class="d-flex justify-content-between align-items-start">
            <div class="flex-grow-1 me-2">
              <h5 class="card-title mb-1 text-white fw-bold {% if t.complete %}text-decoration-line-through text-white-50{% endif %}">
                {{ t.title }}
                {% if t.created_at %}
              </h5>
              <p class="text-primary small fw-bold mb-2" style="font-size: 0.75rem;">ID: #{{ t.tid }}</p>
              <p class="card-text text-white-50 small" style="line-height: 1.5;">{{ t.desc }}</p>
            </div>
            
            <div class="d-flex flex-column gap-2">
              <a href="{% url 'complete' t.tid %}" class="btn btn-sm {% if t.complete %}btn-success{% else %}btn-outline-success{% endif %}" title="Mark Complete">
                <i class="bi {% if t.complete %}bi-check-circle-fill{% else %}bi-circle{% endif %}"></i>
              </a>

              {% if not t.complete %}
                <a class="btn btn-sm btn-outline-info" href="{% url 'update' t.tid %}" title="Edit Task">
                  <i class="bi bi-pencil"></i>
                </a>
              {% endif %}

              <a class="btn btn-sm btn-outline-danger" href="{% url 'delete' t.tid %}" title="Delete Task">
                <i class="bi bi-trash"></i>
              </a>
            </div>
          </div>
          
          <div class="mt-3 pt-2 border-top border-secondary">
             <span class="badge rounded-pill {% if t.complete %}bg-success{% else %}bg-warning text-dark{% endif %} small">
                {% if t.complete %}Completed{% else %}Pending{% endif %}
             </span>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="col-12 text-center py-5">
        <div class="card p-5" style="background: rgba(255, 255, 255, 0.02); border: 1px dashed rgba(255, 255, 255, 0.2);">
          <i class="bi bi-clipboard-x text-white-50 mb-3" style="font-size: 3rem;"></i>
          <h5 class="text-white">No tasks found</h5>
          <p class="text-white-50">You have no todos yet. Create one to get started.</p>
          <div class="mt-3">
            <a class="btn btn-primary" href="{% url 'add' %}">Create First Todo</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <style>
    .card:hover {
      transform: translateY(-5px);
      background: rgba(255, 255, 255, 0.06) !important;
      border-color: rgba(255, 255, 255, 0.2) !important;
    }
  </style>
{% endblock %}